# JVM

## Definition
자바 가상 머신(Java Virtual Machine)은 자바 (바이트)코드를 실행할 수 있는 주체이다.([출처](https://ko.wikipedia.org/wiki/%EC%9E%90%EB%B0%94_%EA%B0%80%EC%83%81_%EB%A8%B8%EC%8B%A0))  

자바 바이트코드는 플랫폼에 독립적이며, 모든 자바 가상머신은 자바 가상머신 규격에 정의된대로 자바코드를 실행한다.  
따라서 이론적으로는 CPU나 운영체제와 무관하게 동작할 것을 보장한다.

자바 가상 머신의 특징은 다음과 같다.  
- 스택 기반
- 단일 상속 형태의 객체 지향 프로그래밍을 가상 머신 수준에서 구현
- 포인터를 지원하나 C와 같이 주소 값을 임의로 조작이 가능한 포인터 연산은 불가
- 가비지 컬렉션 사용
- 모든 기본 타입의 정의를 명확히 함으로써 플랫폼의 독립성 보장
- 데이터 흐름 분석에 기반한 자바 바이트코드 검증기를 통해 스택 오버플로, 명령어 피연산자의 타입 규칙 위반, 필드 접근 규칙 위반, 지역 변수의 초기화 전 사용 등 많은 문제를 실행 전에 검증하여 실행 시 안전을 보장
- 명령어에서 스택에서 가져올 피연산자의 타입을 명령어에 지정

## Process
자바 프로그램이 실행되는 과정은 다음과 같다.([출처](https://asfirstalways.tistory.com/158))
1. 프로그램이 실행되면 JVM은 OS로부터 이 프로그램이 필요로 하는 메모리를 할당받음  
JVM은 이 메모리를 용도에 따라 여러 영역으로 나누어 관리
2. 자바 컴파일러(javac)가 자바코드(.java)를 읽어들여 자바 바이트코드(.class)로 변환
3. Class Loader를 통해 class파일들을 JVM으로 로딩
4. 로딩된 class파일들은 Execution engine을 통해 해석
5. 해석된 바이트 코드는 Runtime Data Areas에 배치되어 실질적인 수행이 이뤄짐  
이러한 실행 과정 속에서 JVM은 필요에 따라 Thread Synchronization과 같은 GC 관리 작업 수행


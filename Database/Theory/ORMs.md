# ORM

## Definition
객체 관계 매핑(Object-relational mapping; ORM)은 데이터베이스와 객체 지향 프로그래밍 언어 간의 호환되지 않는 데이터를 변환하는 프로그래밍 기법이다.([출처](https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_%EA%B4%80%EA%B3%84_%EB%A7%A4%ED%95%91))  

객체 지향 프로그래밍은 클래스를 사용하고, 관계형 데이터베이스느 테이블을 사용한다. 
ORM을 통해 SQL을 자동으로 생성하여 객체 모델과 관계형 모델 간의 불일치를 해결한다.([출처](https://gmlwjd9405.github.io/2019/02/01/orm.html))

## Pros and Cons
- 장점
    - 객체 지향적인 코드로 인해 비즈니스 로직에 집중할 수 있게 해줌
    - 재사용 및 유지보수의 편리성이 증가
    - DBMS 종속성이 줄어듬
- 단점
    - ORM으로 완벽하게 서비스를 구현하기 어려움
    - 프로시저가 많은 시스템에서는 ORM을 활용하기 힘듬  

([출처](https://gmlwjd9405.github.io/2019/02/01/orm.html))

## Impedence Mismatch
[출처](https://en.wikipedia.org/wiki/Object%E2%80%93relational_impedance_mismatch#Object-oriented_concepts)  

- 객체지향
    1. 캡슐화 
        - 대부분의 객체-관계형 매핑 접근 방식은 인터페이스와 상호작용하기위해 객체의 기본 콘텐츠를 노출
        - 따라서 많은 관계형 매퍼가 데이터베이스 열에 해당하는 공개필드를 자동으로 생성
        - 이로 인해 객체 관계형 매핑은 객체 캡슐화를 위반하게 됨
        - 몇몇 프레임워크는 메타프로그래밍 기술을 사용하여 캡슐화 위반을 방지
    2. 접근성
        - private와 public은 필요에 따라 상대적임
        - 객체지향 모델은 데이터 상태의 절대적인 특성
        - 관계형 모델과 객체지향 모델은 분류 및 특성의 상대성과 절대주의를 놓고 충돌하는 경우가 많음
    3. 인터페이스, 클래스, 상속 및 다향성
        - 객체 지향 패러다임에서 객체는 해당 객체의 내부에 대한 유일한 액세스를 제공하는 인터페이스가 있음
        - 반면에 관계형 모델은 무결성을 보장하기 위해 다양한 관점과 제약 조건을 제공함
        - 객체 클래스에 대한 필수 OOP 개념인 상속 및 다향성은 관계형 데이터베이스 시스템에서 지원하지 않음

- 데이터 타입
    - 관계형 모델은 참조에 의한 속성을 엄격히 금지하지만, 객체지향 언어는 참조에 의한 동작을 수용함
    - 따라서 매핑에 문제가 생길 수 있음

- 구조 및 무결성
    - 객체지향 언어에서 객체는 다른 객체로 구성될 수 있음
    - 이는 관계형 스키마에 대한 매핑을 덜 간단하게 만들 수 있음
    - 반면에 관계형 모델은 스칼라 유형, 속성, 관계 변수 및 데이터베이스 전체에 대한 선언적 제약 조건을 요구함

- 조작
    - 관계형 모델에는 쿼리 및 데이터 조작에 사용하기 위한 고유하고 잘 정의된 기본 연산자 세트가 있음
    - 객체지향 언어는 일반적으로 사용자 빌드 또는 물리적 액세스를 통해 쿼리 및 조작을 처리함

- 트랜잭션
    - 관계형 데이터베이스의 트랜잭션은 동적으로 제한된 임의의 데이터 조작 집합
    - 객체지향 언어의 트랜잭션 세분성은 일반적으로 기본 유형 필드에 대한 개별 할당 수준
    - 일반적으로 객체지향 언어에는 격리나 내구성에 대한 유사성이 없으므로 원자성과 일관성은 이러한 기본 유형의 필드에 쓸 때만 보장됨

## Solving Impedence Mismatch
- 대체 아키텍쳐 사용
    - 임피던스 불일치 문제는 관계형 데이터베이스에서만 발생함
    - 가장 일반적인 솔루션은 NoSQL 또는 XML 데이터베이스와 같은 대체 데이터베이스를 사용하는 것

- 최소화
    - 도메인 및 프레임워크 논리를 계층화하는 것
    - 이 체계에서 객체자향 언어는 정적인 매핑보다는 런타임에 특정 관계형 측면을 모델링하는 데 사용
    - 이 방법을 사용하는 프레임워크는 일반적으로 데이터 세트 구성요소의 행 또는 일반 엔티티 인스턴스 클래스와 관계에 대한 아날로그와 같은 튜플에 대한 유사성을 가짐
    - 장점
        - 경로가 간단해짐
        - 코드 크기가 작아짐
        - 스키마가 동적으로 변경됨
        - 네임스페이스 및 의미 불일치 문제 방지
        - 표현 제약조건 검사
        - 복잡한 매핑 불필요
    - 단점
        - 정적유형 안전 검사 부족
        - 런타임 구성 및 액세스의 성능 비용
        - 다형성과 같은 고유한 객체지향 측면을 활용할 수 없ㅇㅁ

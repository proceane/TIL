# Optimizer

## Definition
옵티마이저는 가장 효율적인 방법으로 SQL을 수행할 최적의 처리 경로를 생성해주는 DBMS의 핵심 엔진이다.([출처](https://coding-factory.tistory.com/743))  
SQL을 실행할 때 옵티마이저를 통해 어떻게 실행될지 계획이 세워진다.  
이렇게 세운 실행계획으로 시스템 통계 정보를 활용하여 각 실행 계획의 예상 비용을 산정한 후 각 실행 계획을 비교해서 최고의 효율을 가지고 있는 실행계획을 찾아 그 실행계획으로 쿼리를 수행하게 된다.

## Category
옵티마이저는 규칙 기반 옵티마이저와 비용 기반 옵티마이저로 나뉜다.
* 규칙 기반 옵티마이저
  * 규칙(우선순위)을 가지고 실행 계획을 수립
  * 인덱스 유무
  * 개발자의 SQL 숙련도에 따라 성능 달라짐
  * 실행 예상 가능
  * 예측 통계 정보 무시됨  
[우선순위표 참고](https://coding-factory.tistory.com/743)
  
* 비용 기반 옵티마이저
  * 규칙 기반 옵티마이저의 단점을 보완하기 위해 등장
  * 최소 비용을 계산하여 실행 계획 수립
  * 비용에 의해 결정
  * 옵티마이저의 예측성능에 따라 달라짐
  * 통계 정보를 통한 현실 요소 적용
  * 최소 성능 보장 계획의 예측 제어 어려움  
[비용 기반 옵티마이저의 모드 참고](https://coding-factory.tistory.com/743)

## Process
1. SQL Parser : SQL문장을 분석하여 문법을 검사하고 구성 요소를 파악, 이를 파싱하여 파싱 트리 생성

2. Query Transfer : 파싱된 SQL을 보고 동일한 결과를 갖지만 좀 더 나은 실행 계획을 갖는 SQL로 변환 가능한지 판단하여 변환 작업 수행

3. Estimator : 시스템 통계 정보를 딕셔너리에서 수집하여 SQL을 실행할 때 소요되는 총 비용을 계산

4. Plan Generator : 옵티마이저가 생성한 실행 계획을 SQL엔진이 실제로 실행할 수 있는 코드나 프로시저 형태로 포멧팅

5. SQL Engine : SQL을 실행